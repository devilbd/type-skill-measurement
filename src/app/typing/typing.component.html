<div class="typing-component-root" [ngClass]="currentTheme()">
  <div class="stats">
    @if (!testFinished()) {
      <div class="stat-item">
        <span>Time Left:</span>
        <strong>{{ timeLeft() }}s</strong>
      </div>
    }
    @if (testFinished()) {
      <div class="stat-item">
        <span>WPM:</span>
        <strong>{{ wpm() }}</strong>
      </div>
      <div class="stat-item">
        <span>Accuracy:</span>
        <strong>{{ accuracy() }}%</strong>
      </div>
    }
    <div class="level-status">
      <p>Level: {{ currentLevel() }}</p>
      <p>Points: {{ currentPoints() }} / {{ pointsForNextLevel() }}</p>
    </div>
    <div class="action-buttons">
      <button (click)="resetTest()" class="reset-button">Cancel Session</button>
    </div>
  </div>

  <div class="text-display">
    @for (word of words(); track $index) {
      <span class="word" [ngClass]="wordStates[$index]()">{{ word }}</span>
    }
  </div>

  <div class="input-area">
    <textarea #typingInput (input)="onInput($event)" placeholder="Start typing here..." [disabled]="testFinished()"></textarea>
  </div>
</div>